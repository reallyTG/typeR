---
title: "Overview"
output: html_notebook
---

Ok.
First, load the full signatures, and make sure we source the data processing file.
There's an error here, not sure what's causing it.
This is a work-in-progress.

```{r}
source("../code/data_processing.R") # get the functions we need
```

```{r, echo=FALSE}
los <- list.files("../data/full_sigs", full.names=TRUE)
names <- list.files("../data/full_sigs")
names(los) <- substr(names, 1, nchar(names)-4)
los <- lapply(los, readRDS)
los <- remove_empties(los)
# annoying strange error that I should fix pops up
```

These are the updated counts.
```{r}
total_arguments <- apply_count_to_lopkg_c(los, args_count_all)
total_mono_type <- apply_count_to_lopkg_c(los, args_count_all_mono_type)
total_mono_attr <- apply_count_to_lopkg_c(los, args_count_all_mono_attr_pattern)
total_mono_clas <- apply_count_to_lopkg_c(los, args_count_all_mono_class)

total_functions <- apply_count_to_lopkg_c(los, length)
total_mono_type_functions <- apply_count_to_lopkg_c(los, fun_count_all_mono_type)
total_mono_attr_functions <- apply_count_to_lopkg_c(los, fun_count_all_mono_attr_pattern)
total_mono_clas_functions <- apply_count_to_lopkg_c(los, fun_count_all_mono_class)
```

This is how you get the top sigs.
```{r}
poly_type_args <- reduce_extracted_lopkgs_to_one(apply_extract_to_lopkg(los, extract_poly_type_args))
poly_type_args <- poly_type_args[order(-poly_type_args$count),] # sort by count
poly_type_args$perc <- round(poly_type_args$count/sum(poly_type_args$count) * 100, 2)
```

Then, pick out the ones you want.
The `format_df_for_print` function is just for letting the notebook display the data frame properly.
The type, attr, and class rows are lists of lists.
```{r}
format_df_for_print(poly_type_args[1:20,])
```

Similarly for attributes, and classes.
```{r}
poly_attr_args <- reduce_extracted_lopkgs_to_one(apply_extract_to_lopkg(los, extract_poly_attr_args))
poly_attr_args <- poly_attr_args[order(-poly_attr_args$count),] # sort by count
poly_attr_args$perc <- round(poly_attr_args$count/sum(poly_attr_args$count) * 100, 2)
```

```{r}
poly_class_args <- reduce_extracted_lopkgs_to_one(apply_extract_to_lopkg(los, extract_poly_class_args))
poly_class_args <- poly_class_args[order(-poly_class_args$count),] # sort by count
poly_class_args$perc <- round(poly_class_args$count/sum(poly_class_args$count) * 100, 2)
```

Printing is as before.
Note that ATM I also have attribute type information in here.
I'll get it to display just the names as well.
I figured this might be interesting, and I don't expect many functions to be polymorphic in this way.
```{r}
format_df_for_print(poly_attr_args[1:20,])
```

```{r}
format_df_for_print(poly_class_args[1:20,])
```